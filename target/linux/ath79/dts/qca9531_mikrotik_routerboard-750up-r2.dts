// SPDX-License-Identifier: GPL-2.0-or-later OR MIT

#include "qca953x_mikrotik_routerboard-16m.dtsi"

/ {
	compatible = "mikrotik,routerboard-750up-r2", "qca,qca9533";
	model = "MikroTik RouterBOARD 750UP r2 (hEX lite)";

	aliases {
		led-boot = &led_usr;
		led-failsafe = &led_usr;
		led-upgrade = &led_usr;
		led-running = &led_usr;
	};

	leds {
		compatible = "gpio-leds";
		pinctrl-names = "default";

		led_usr: usr {
			label = "green:usr";
			gpios = <&gpio 4 GPIO_ACTIVE_LOW>;
		};

		led1 {
			label = "green:led1";
			gpios = <&ssr 0 GPIO_ACTIVE_LOW>;
		};

		led2 {
			label = "green:led2";
			gpios = <&ssr 1 GPIO_ACTIVE_LOW>;
		};

		led3 {
			label = "green:led3";
			gpios = <&ssr 2 GPIO_ACTIVE_LOW>;
		};

		led4 {
			label = "green:led4";
			gpios = <&ssr 3 GPIO_ACTIVE_LOW>;
		};

		led5 {
			label = "green:led5";
			gpios = <&ssr 4 GPIO_ACTIVE_LOW>;
		};
	};

	gpio-export {
		compatible = "gpio-export";

		usb_power {
			gpio-export,name = "power-usb";
			gpio-export,output = <1>;
			gpios = <&ssr 5 GPIO_ACTIVE_HIGH>;
		};
	};
};

&pinmux {
	pmx_spi_cs1: pinmux_spi_cs1 {
		pinctrl-single,bits = <0x8 0x0a000000 0xff000000>;
	};
};

&spi {

	pinctrl-names = "default";
	pinctrl-0 = <&pmx_spi_cs1>;

	cs-gpios = <0>, <&gpio 11 GPIO_ACTIVE_LOW>;

	ssr: ssr@1 {
		compatible = "fairchild,74hc595";
		gpio-controller;
		#gpio-cells = <2>;
		registers-number = <1>;
		reg = <1>;
		spi-max-frequency = <10000000>;
	};
};

&usb_phy {
	status = "okay";
};

&usb0 {
	status = "okay";
};

&eth0 {
	status = "okay";

	phy-handle = <&swphy4>;
};

&eth1 {
	status = "okay";
};
